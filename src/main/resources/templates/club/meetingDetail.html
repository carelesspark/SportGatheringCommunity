<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/club/template/club :: setContent(~{this :: content})}">
  <div class="container" th:fragment="content">

    <div class="d-flex justify-content-between align-items-center mb-3">
      <div class="d-flex flex-row">
        <div class="d-flex align-items-center p-1">
          <h3>[[${meetingDTO.title}]]</h3>
        </div>
        <div class="d-flex align-items-end p-1">
          <div class="">[[${meetingDTO.ctgrName}]]</div>
        </div>
        <div class="d-flex align-items-end p-1">
          <div th:if="${isAttended}">참가중</div>
        </div>
      </div>
      <a class="btn btn-primary"
         onclick="checkAttendees(event)"
         th:disabled="${meetingDTO.currentPersonnel ge meetingDTO.mPersonnel}"
         th:href="@{/club/attendMeeting(
         clubId=${navDTO.clubId},
         meetingId=${meetingDTO.meetingId},
         isAttended=${isAttended}
         )}"
         th:if="${!isAttended}"
      >참가</a>
      <a class="btn btn-primary" th:href="@{/club/attendMeeting(
         clubId=${navDTO.clubId},
         meetingId=${meetingDTO.meetingId},
         isAttended=${isAttended}
         )}"
         th:if="${isAttended}">참가 취소</a>
    </div>

    <div class="d-flex mr-3">
      <div>
        일시 [[${#temporals.format(meetingDTO.mTime, 'M월 d일 a h시 m분')}]]
      </div>
      <div>
        장소 [[${meetingDTO.mPlace}]]
      </div>
      <div>
        인원 [[${meetingDTO.mPersonnel}]] / [[${meetingDTO.currentPersonnel}]]
      </div>
      <div>
        <div>설며</div>
        <div>[[${meetingDTO.content}]]</div>
      </div>

      <p th:text="${meetingDTO.mPersonnel} + '명/' + ${meetingDTO.currentPersonnel} + '명'"></p>
      <p th:text="${meetingDTO.replyCount}"></p>
    </div>

    <!--댓글 창-->
    <div>
      <!--댓글 작성하는 곳-->
      <div>

      </div>
      <!--댓글 보여주는 곳-->
      <div>

      </div>
    </div>

    <script th:inline="javascript">
      function checkAttendees(event) {
        let currentAttendees = [[${meetingDTO.currentPersonnel}]];
        let maxAttendees = [[${meetingDTO.mPersonnel}]];

        if (currentAttendees >= maxAttendees) {
          alert("인원이 전부 찼습니다.");
          event.preventDefault();
        }
      }
    </script>
  </div>
</th:block>
</html>